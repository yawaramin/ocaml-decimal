<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Decimal (decimal.Decimal)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">decimal</a> &#x00BB; Decimal</nav><h1>Module <code>Decimal</code></h1><p>This is an implementation of decimal floating point arithmetic based on the General Decimal Arithmetic Specification:</p><p><a href="http://speleotrove.com/decimal/decarith.html">http://speleotrove.com/decimal/decarith.html</a></p><p>and IEEE standard 854-1987:</p><p><a href="http://en.wikipedia.org/wiki/IEEE_854-1987">http://en.wikipedia.org/wiki/IEEE_854-1987</a></p><p>Decimal floating point has finite precision with arbitrarily large bounds. The purpose of this module is to support arithmetic using familiar &quot;schoolhouse&quot; rules and to avoid some of the tricky representation issues associated with binary floating point. The package is especially useful for financial applications or for contexts where users have expectations that are at odds with binary floating point (for instance, in binary floating point, 1.00 mod 0.1 gives 0.09999999999999995 instead of 0.0; <code>Decimal.(of_string &quot;1.00&quot; mod of_string &quot;0.1&quot;)</code> returns the expected &quot;0.00&quot;).</p></header><dl><dt class="spec module" id="module-Signal"><a href="#module-Signal" class="anchor"></a><code><span class="keyword">module</span> <a href="Signal/index.html">Signal</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Signals are used to control the behaviour of the decimal functions under exceptional conditions.</p></dd></dl><dl><dt class="spec module" id="module-Context"><a href="#module-Context" class="anchor"></a><code><span class="keyword">module</span> <a href="Context/index.html">Context</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Settings that control precision, rounding mode, exceptional behaviour, etc.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>A decimal floating-point number. All operations are done in radix (base) 10.</p></dd></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> Stdlib.Map.OrderedType <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html">Decimal</a>.t := <a href="index.html#type-t">t</a></code></span></summary><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> Stdlib.Hashtbl.HashedType <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html">Decimal</a>.t := <a href="index.html#type-t">t</a></code></span></summary><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span class="keyword">val</span> hash : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-infinity"><a href="#val-infinity" class="anchor"></a><code><span class="keyword">val</span> infinity : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-neg_infinity"><a href="#val-neg_infinity" class="anchor"></a><code><span class="keyword">val</span> neg_infinity : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-nan"><a href="#val-nan" class="anchor"></a><code><span class="keyword">val</span> nan : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-one"><a href="#val-one" class="anchor"></a><code><span class="keyword">val</span> one : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span class="keyword">val</span> zero : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-of_bigint"><a href="#val-of_bigint" class="anchor"></a><code><span class="keyword">val</span> of_bigint : Z.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-of_int"><a href="#val-of_int" class="anchor"></a><code><span class="keyword">val</span> of_int : int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-of_float"><a href="#val-of_float" class="anchor"></a><code><span class="keyword">val</span> of_float : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_float ?context float</code> is the decimal representation of the <code>float</code>. This suffers from floating-point precision loss; the other constructors should be preferred.</p></dd></dl><dl><dt class="spec value" id="val-to_bigint"><a href="#val-to_bigint" class="anchor"></a><code><span class="keyword">val</span> to_bigint : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Z.t</code></dt><dd><p><code>to_bigint t</code> is <code>t</code> converted to a bigint and truncated if necessary.</p></dd></dl><dl><dt class="spec value" id="val-to_bool"><a href="#val-to_bool" class="anchor"></a><code><span class="keyword">val</span> to_bool : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-to_rational"><a href="#val-to_rational" class="anchor"></a><code><span class="keyword">val</span> to_rational : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Q.t</code></dt><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <span>?&#8288;eng:bool</span> <span>&#45;&gt;</span> <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-to_tuple"><a href="#val-to_tuple" class="anchor"></a><code><span class="keyword">val</span> to_tuple : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int * string * int</code></dt><dd><p><code>to_tuple t</code> is a representation of the internals of <code>t</code> as a triple of <code>(sign, coefficient, exponent)</code> for debugging purposes.</p></dd></dl><dl><dt class="spec value" id="val-abs"><a href="#val-abs" class="anchor"></a><code><span class="keyword">val</span> abs : <span>?&#8288;round:bool</span> <span>&#45;&gt;</span> <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>abs ?round ?context t</code> is the absolute value of <code>t</code>, rounded only if <code>round</code> is <code>true</code>.</p></dd></dl><dl><dt class="spec value" id="val-copy_abs"><a href="#val-copy_abs" class="anchor"></a><code><span class="keyword">val</span> copy_abs : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>copy_abs t</code> is the absolute value of <code>t</code> without rounding.</p></dd></dl><dl><dt class="spec value" id="val-adjusted"><a href="#val-adjusted" class="anchor"></a><code><span class="keyword">val</span> adjusted : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>adjusted t</code> is the exponent of <code>t</code> after adjusting its coefficient (significand) into standard form, i.e. scientific notation.</p><p>E.g., <code>Decimal.(&quot;314&quot; |&gt; of_string |&gt; adjusted)</code> is 2 because it is 3.14e2 in standard form. And, <code>Decimal.(&quot;42e-10&quot; |&gt; of_string |&gt; adjusted)</code> is -9 because it is 4.2e-9 in standard form.</p></dd></dl><dl><dt class="spec value" id="val-negate"><a href="#val-negate" class="anchor"></a><code><span class="keyword">val</span> negate : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>negate ?context t</code> is <code>t</code> negated, and rounded under <code>context</code> if necessary.</p></dd></dl><dl><dt class="spec value" id="val-copy_negate"><a href="#val-copy_negate" class="anchor"></a><code><span class="keyword">val</span> copy_negate : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>copy_negate t</code> is <code>t</code> negated without rounding.</p></dd></dl><dl><dt class="spec value" id="val-posate"><a href="#val-posate" class="anchor"></a><code><span class="keyword">val</span> posate : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Opposite of <code>negate</code>; <code>t</code>'s sign is left unchanged but <code>t</code> is rounded under <code>context</code> if necessary.</p></dd></dl><dl><dt class="spec value" id="val-quantize"><a href="#val-quantize" class="anchor"></a><code><span class="keyword">val</span> quantize : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;round:<a href="Context/index.html#type-round">Context.round</a></span> <span>&#45;&gt;</span> <span>exp:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>quantize ?context ?round ~exp t</code> is <code>t</code> quantized so that its exponent is the same as that of <code>exp</code>.</p></dd></dl><dl><dt class="spec value" id="val-round"><a href="#val-round" class="anchor"></a><code><span class="keyword">val</span> round : <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>round ?n t</code> is <code>t</code> rounded to the nearest integer, or to a given precision. If <code>n</code> is <code>None</code>, round <code>t</code> to the nearest integer. If <code>t</code> is ∞ or <code>NaN</code> then raises an exception. If <code>t</code> lies exactly halfway between two integers then it is rounded to the even integer.</p></dd></dl><dl><dt class="spec value" id="val-sign"><a href="#val-sign" class="anchor"></a><code><span class="keyword">val</span> sign : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>sign t</code> is <code>-1</code> if t is negative, and <code>1</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-min"><a href="#val-min" class="anchor"></a><code><span class="keyword">val</span> min : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>min t1 t2</code> is the smaller of <code>t1</code> and <code>t2</code>.</p></dd></dl><dl><dt class="spec value" id="val-max"><a href="#val-max" class="anchor"></a><code><span class="keyword">val</span> max : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>max t1 t2</code> is the larger of <code>t1</code> and <code>t2</code>.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-mul"><a href="#val-mul" class="anchor"></a><code><span class="keyword">val</span> mul : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-div"><a href="#val-div" class="anchor"></a><code><span class="keyword">val</span> div : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-div_rem"><a href="#val-div_rem" class="anchor"></a><code><span class="keyword">val</span> div_rem : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <a href="index.html#type-t">t</a></code></dt><dd><p><code>div_rem ?context t1 t2</code> is <code>(t1 / t2, t1 mod t2)</code>.</p></dd></dl><dl><dt class="spec value" id="val-rem"><a href="#val-rem" class="anchor"></a><code><span class="keyword">val</span> rem : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>rem ?context t1 t2</code> is <code>t1 mod t2</code>.</p></dd></dl><dl><dt class="spec value" id="val-fma"><a href="#val-fma" class="anchor"></a><code><span class="keyword">val</span> fma : <span>?&#8288;context:<a href="Context/index.html#type-t">Context.t</a></span> <span>&#45;&gt;</span> <span>first_mul:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>then_add:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>fma ?context ~first_mul ~then_add t</code> is fused multiply-add: <code>t * first_mul + then_add</code> with no rounding of the intermediate product.</p><p><code>t</code> and <code>first_mul</code> are multiplied together, then <code>then_add</code> is added to the product, then a final rounding is performed.</p></dd></dl><dl><dt class="spec value" id="val-(~-)"><a href="#val-(~-)" class="anchor"></a><code><span class="keyword">val</span> (~-) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(~+)"><a href="#val-(~+)" class="anchor"></a><code><span class="keyword">val</span> (~+) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(=)"><a href="#val-(=)" class="anchor"></a><code><span class="keyword">val</span> (=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;)"><a href="#val-(&lt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&gt;)"><a href="#val-(&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&gt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;=)"><a href="#val-(&lt;=)" class="anchor"></a><code><span class="keyword">val</span> (&lt;=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&gt;=)"><a href="#val-(&gt;=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(+)"><a href="#val-(+)" class="anchor"></a><code><span class="keyword">val</span> (+) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(-)"><a href="#val-(-)" class="anchor"></a><code><span class="keyword">val</span> (-) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(*)"><a href="#val-(*)" class="anchor"></a><code><span class="keyword">val</span> (*) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(/)"><a href="#val-(/)" class="anchor"></a><code><span class="keyword">val</span> (/) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(mod)"><a href="#val-(mod)" class="anchor"></a><code><span class="keyword">val</span> (mod) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></div></body></html>